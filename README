Muninator - A munin-node inside Rails
=====================================

This is a really early implementation of munin-node running
inside your rails process, in the hopes that we can add
graphing and visibility for a whole bunch of stuff that
you have to guess at right now.
You will need a working Munin graphing machine:
http://munin-monitoring.org/

Configuration:
--------------

Basic configuration which will hit 90% of use cases as follows:

Create muninator.yml in RAILS_ROOT/config/ and populate it
like so:

production:
  port: 4950
  server_name: myrailsapp.com
  restrict: localhost

Create RAILS_ROOT/initializers/muninator.rb:

Muninator.from_config

You can then add myrailsapp.com to your /etc/munin/munin.conf

[myrailsapp.com]
  address 127.0.0.1
  use_node_name yes
  port 4950

Adding plugins:
---------------

You can put your plugins in lib/commands/ of this project or
you can add them to your own project and call:

Muninator::Commands.search_paths << RAILS_ROOT + "/lib/munin_plugins/"

Plugin classes need to be in the namespace Muninator::Commands and
define the config() and fetch() class methods which return strings
in the format expected by Munin (see 
http://munin-monitoring.org/wiki/HowToWritePlugins).

You can add them on the fly and call Muninator::Commands.reload at
any time.

Automatic Monitoring of Models
------------------------------

You can automatically start graphing your models by adding `acts_as_munin_plugin`
to your models.
You might also want to call the class names of each of your monitored models in
the initializer so that the plugin is loaded at start up (ActiveRecord models are
lazy loaded).

Automatic Monitoring of Controllers
-----------------------------------

You can automatically start graphing hits, response body size and response
latency by calling the `monitor_with_munin` class method in your controllers.
Note that because Rails lazy-loads controllers you probably won't see graphs
for controllers that seldom or never used.

Phusion Passenger:
------------------

As of May 4th 2010, Muninator seems to work fine with Passenger.

License:
--------

This plugin is licensed under the terms of the Mozilla Public License version 1.1 and is Copyright (c) 2010 James Harton.
